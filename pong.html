<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pong</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <script src="jquery-3.2.1.js"></script>
</head>
<body onload="intro()">
<div id="intro">
    <div id="pong">Pong</div>
    <p>Press Enter to Play</p>
</div>

<h1 style="position:absolute;left:45%;top:10px;font-size:70px;">Pong</h1>
<h1 style="position:absolute;left:30px;top:80px;">Player 1: <span id="score1">0</span></h1>
<h1 style="position:absolute;right:30px;top:80px;">Player 2: <span id="score2">0</span></h1>
<hr style="margin-top:150px;">

<div id="paddle1" style = "position:absolute; left:0px; top:460px; width:10px; height:150px; background-color:black;"></div>
<div id="ball" style= "position:absolute;left:700px;top:510px;width:25px;height:25px;background-color:red;border-radius:50%;"></div>
<div id="paddle2" style= "position:absolute;right:0px;top:460px;width:10px;height:150px;background-color:black;"></div>
    
<script>
var wallS = new Audio("ping_pong_8bit_plop.wav")
var paddleS = new Audio("ping_pong_8bit_beeep.wav")
var missS = new Audio("ping_pong_8bit_peeeeeep.wav")
var atari = new Audio("Atari-Sound.wav")

var paddleHeight = 150;
var paddleWidth = 10;
var ballRadius = 25;
var halfPaddleHeight = paddleHeight / 2;
var speedOfPaddle1 = 0;
var positionOfPaddle1 = 460;
var speedOfPaddle2 = 0;
var positionOfPaddle2 = 460;
var topPositionOfBall = 510;
var leftPositionOfBall = 820;
var topSpeedOfBall = 0;
var leftSpeedOfBall = 0;
var score1 = 0;
var score2 = 0;
var count = score1 + score2;

$('#intro').hide();

function blink(selector){
$(selector).fadeOut('slow', function(){
    $(this).fadeIn('slow', function(){
        blink(this);
    });
});
}

function intro() {
    $('#intro').fadeIn();
    blink('p');
    document.addEventListener('keydown', function (e) {
    if (e.keyCode === 13 || e.which === 13) { // Enter key
        $('#intro').fadeOut();
        atari.play();
        startBall();
    }
    })
 }

function startBall() {
topPositionOfBall = 510;
leftPositionOfBall = 820;
if (Math.random() < 0.5) {
  var side = 1
 } else {
  var side = -1
 }
 topSpeedOfBall = Math.random() * -6 - 3;
 leftSpeedOfBall = side * (Math.random() * 6 + 3);
};

document.addEventListener('keydown', function (e) {
    if (e.keyCode === 87 || e.which === 87) { // W key
    speedOfPaddle1 = -10;
    //document.getElementById('paddle1').style.top = (positionOfPaddle1) + "px"
    }

    if (e.keycode === 83 || e.which === 83) { // S Key
    speedOfPaddle1 = 10;
    //document.getElementById('paddle1').style.top = (positionOfPaddle1) + "px"
    }

    if (e.keycode === 38 || e.which === 38) { // UP Arrow Key
    speedOfPaddle2 = -10;
    //document.getElementById('paddle2').style.top = (positionOfPaddle2) + "px"
    }

    if (e.keycode === 40 || e.which === 40) { // DOWN Arrow Key
    speedOfPaddle2 = 10;
    //document.getElementById('paddle2').style.top = (positionOfPaddle2) + "px"
    }
}, false)

//create smooth paddle movement
window.setInterval(function show() {
    positionOfPaddle1 += speedOfPaddle1;
    positionOfPaddle2 += speedOfPaddle2;

    document.getElementById('paddle1').style.top = (positionOfPaddle1) + "px"
    document.getElementById('paddle2').style.top = (positionOfPaddle2) + "px"

    topPositionOfBall += topSpeedOfBall;
    leftPositionOfBall += leftSpeedOfBall;

    document.getElementById("ball").style.top = (topPositionOfBall) + "px";
    document.getElementById("ball").style.left = (leftPositionOfBall) + "px";

    if (positionOfPaddle1 <= 150) {
        positionOfPaddle1 = 150;
    }
    if (positionOfPaddle2 <= 150) {
        positionOfPaddle2 = 150;
    }
    if (positionOfPaddle1 >= window.innerHeight - paddleHeight) { // set paddle1 position
        positionOfPaddle1 = window.innerHeight - paddleHeight
    }
    if (positionOfPaddle2 >= window.innerHeight - paddleHeight) { // set paddle2 position
        positionOfPaddle2 = window.innerHeight - paddleHeight
    }
    if (topPositionOfBall <= 150 || topPositionOfBall >= window.innerHeight - ballRadius) { // reverse the ball when it hits the top or bottom** - ballRadius
        topSpeedOfBall = -topSpeedOfBall;
        wallS.play();
    }
    if (leftPositionOfBall <= paddleWidth) { // reverse direction of ball when it hits paddle1, else new game
        if (topPositionOfBall > positionOfPaddle1 && topPositionOfBall < positionOfPaddle1 + paddleHeight) {
            leftSpeedOfBall = -leftSpeedOfBall;
            paddleS.play();
        } else {
            score2++;
            missS.play();
            startBall();
            }
    }
    if (leftPositionOfBall >= window.innerWidth - ballRadius - paddleWidth) { // reverse direction of ball when it hits paddle2, else new game
        if (topPositionOfBall > positionOfPaddle2 && topPositionOfBall < positionOfPaddle2 + paddleHeight) {
            leftSpeedOfBall = -leftSpeedOfBall;
            paddleS.play();
        } else {
            score1++;
            missS.play();
            startBall();
            }
    }   

    document.getElementById('score1').innerText = score1.toString();
    document.getElementById('score2').innerHTML = score2.toString();
}, 1000/60);

document.addEventListener('keyup', function (e) {
    if (e.keyCode === 87 || e.which === 87) {
        speedOfPaddle1 = 0;
    }
    if (e.keyCode === 83 || e.which === 83) {
        speedOfPaddle1 = 0;
    }
    if (e.keyCode === 38 || e.which === 38) {
        speedOfPaddle2 = 0;
    }
    if (e.keycode === 40 || e.which === 40) {
        speedOfPaddle2 = 0;
    }
}, false)



</script>
</body>
</html>